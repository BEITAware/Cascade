<UserControl x:Class="Cascade.Views.Operations.CascadeIO.NamingAndOutputView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Cascade.Views.Operations.CascadeIO"
             xmlns:vm="clr-namespace:Cascade.ViewModels.Operations.CascadeIO"
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="520"
             Foreground="White">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Cascade;component/Styles/AeroControls.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="16">

            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <!-- 输出模式 -->
            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <TextBlock Text="{DynamicResource NamingOutput_OutputMode}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,12,0,8"/>
            
            <StackPanel>
                <ComboBox Width="200" Height="28" HorizontalAlignment="Left"
                          SelectedIndex="{Binding SelectedOutputModeIndex}">
                    <ComboBoxItem Content="{DynamicResource NamingOutput_OutputToSpecifiedDir}"/>
                    <ComboBoxItem Content="{DynamicResource NamingOutput_OutputToSourceFolder}"/>
                    <ComboBoxItem Content="{DynamicResource NamingOutput_OutputToSubDir}"/>
                    <ComboBoxItem Content="{DynamicResource NamingOutput_CloneSourceStructure}"/>
                </ComboBox>
                <TextBlock Text="{DynamicResource NamingOutput_OutputMode}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0"/>
            </StackPanel>

            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <!-- 输出路径 -->
            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <TextBlock Text="{DynamicResource NamingOutput_OutputPath}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,20,0,8"
                       Visibility="{Binding ShowOutputPath, Converter={StaticResource BoolToVisibility}}"/>
            
            <!-- 输出到指定目录 或 克隆源文件夹结构 -->
            <StackPanel Visibility="{Binding ShowOutputPath, Converter={StaticResource BoolToVisibility}}">
                <StackPanel Orientation="Horizontal">
                    <StackPanel>
                        <TextBox Width="320" Height="26"
                                 Text="{Binding OutputPath, UpdateSourceTrigger=PropertyChanged}"
                                 VerticalContentAlignment="Center"/>
                        <TextBlock Text="{DynamicResource NamingOutput_OutputPath}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0" HorizontalAlignment="Right"/>
                    </StackPanel>
                    <Button Width="80" Height="26" Margin="8,0,0,0"
                            Content="{DynamicResource NamingOutput_Browse}"
                            Command="{Binding BrowseOutputPathCommand}"
                            VerticalAlignment="Top"/>
                </StackPanel>
            </StackPanel>

            <!-- 输出到源文件夹子目录 -->
            <TextBlock Text="{DynamicResource NamingOutput_OutputPath}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,20,0,8"
                       Visibility="{Binding ShowSubdirectoryName, Converter={StaticResource BoolToVisibility}}"/>
            
            <StackPanel Visibility="{Binding ShowSubdirectoryName, Converter={StaticResource BoolToVisibility}}">
                <StackPanel>
                    <TextBox Width="200" Height="26" HorizontalAlignment="Left"
                             Text="{Binding SubdirectoryName, UpdateSourceTrigger=PropertyChanged}"
                             VerticalContentAlignment="Center"/>
                    <TextBlock Text="{DynamicResource NamingOutput_SubdirectoryName}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0" HorizontalAlignment="Right" Width="400"/>
                </StackPanel>
            </StackPanel>

            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <!-- 输出名称 -->
            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <TextBlock Text="{DynamicResource NamingOutput_OutputName}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,20,0,8"/>
            
            <StackPanel>
                <TextBox Width="280" Height="26" HorizontalAlignment="Left"
                         Text="{Binding OutputFileName, UpdateSourceTrigger=PropertyChanged}"
                         VerticalContentAlignment="Center"/>
                <TextBlock Text="{DynamicResource NamingOutput_OutputName}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0" HorizontalAlignment="Right" Width="310"/>
            </StackPanel>

            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <!-- 命名模板（预留） -->
            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <TextBlock Text="{DynamicResource NamingOutput_NamingTemplate}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,20,0,8"/>
            
            <TextBlock Text="{DynamicResource NamingOutput_Reserved}" FontSize="12" Foreground="#66FFFFFF" Margin="0,0,0,4"/>

            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <!-- 文件名冲突处理 -->
            <!-- ═══════════════════════════════════════════════════════════════════════ -->
            <TextBlock Text="{DynamicResource NamingOutput_ConflictHandling}" FontSize="14" FontWeight="SemiBold" Foreground="#FF61D1F0" Margin="0,20,0,8"/>
            
            <StackPanel Orientation="Horizontal">
                <!-- 自定义后缀输入框（在ComboBox左侧） -->
                <StackPanel Visibility="{Binding ShowCustomSuffix, Converter={StaticResource BoolToVisibility}}" Margin="0,0,12,0">
                    <TextBox Width="120" Height="26"
                             Text="{Binding CustomSuffix, UpdateSourceTrigger=PropertyChanged}"
                             VerticalContentAlignment="Center"/>
                    <TextBlock Text="{DynamicResource NamingOutput_Suffix}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0" HorizontalAlignment="Right"/>
                </StackPanel>
                
                <StackPanel>
                    <ComboBox Width="160" Height="28"
                              SelectedIndex="{Binding SelectedConflictResolutionIndex}">
                        <ComboBoxItem Content="{DynamicResource NamingOutput_Rename}"/>
                        <ComboBoxItem Content="{DynamicResource NamingOutput_Skip}"/>
                        <ComboBoxItem Content="{DynamicResource NamingOutput_AddNumericSuffix}"/>
                        <ComboBoxItem Content="{DynamicResource NamingOutput_AddTimestampSuffix}"/>
                        <ComboBoxItem Content="{DynamicResource NamingOutput_AddCustomSuffix}"/>
                        <ComboBoxItem Content="{DynamicResource NamingOutput_Overwrite}"/>
                    </ComboBox>
                    <TextBlock Text="{DynamicResource NamingOutput_ConflictResolution}" FontSize="10" Foreground="#99FFFFFF" Margin="4,2,0,0"/>
                </StackPanel>
            </StackPanel>

            <!-- 底部间距 -->
            <Border Height="20"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>
